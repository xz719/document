# CSS 常见面试题：清除浮动

## 1. 为什么要清除浮动？

浮动的原理是让**元素脱离文档流**，直接浮在页面上。

我们一般布局的时候都是只设置宽度不设置高度，让内容来自动填充高度。但使用浮动后会让原本填充的高度消失，父元素高度为 0，后续添加内容布局会产生混乱，造成【高度塌陷】，这时候就可以利用**清除浮动**来解决父元素高度塌陷的问题。

看下面这个例子：

```html
<style>
    *{
        margin: 0;
        padding: 0;
    }
    .box1{
        width: 100px;
        height: 100px;
        background-color: pink;
    }
    .box2{
        width: 80px;
        height: 80px;
        background-color: skyblue;
    }
</style>


<div class="box1">1</div>
<div class="box2">2</div>
```

效果如下：

[![pFYF1rF.png](https://s11.ax1x.com/2024/02/19/pFYF1rF.png)](https://imgse.com/i/pFYF1rF)

如果为 box1 添加一个左浮动 `float: left`，效果如下：

[![pFYFa26.png](https://s11.ax1x.com/2024/02/19/pFYFa26.png)](https://imgse.com/i/pFYFa26)

可以看到，box2 不见了。为什么呢？因为 box1 设置浮动后，它**不再占据原本的位置**，所以 box2 就会向上移动，然后被 box1 盖住：

[![pFYFNP1.png](https://s11.ax1x.com/2024/02/19/pFYFNP1.png)](https://imgse.com/i/pFYFNP1)

这就是我们前面说到的，浮动使得后续的布局产生了混乱。

## 2. 如何清除浮动？有哪几种方法？

### 方法 1：`clear`

为 box2 添加 `clear: left`，见：[clear](./tests/float.html)

这里需要注意，这里 `clear` 需要消除的是上一个盒子对自己的影响，所以，前面一个盒子往哪边浮动，我们就 `clear` 哪边，这里的上一个盒子是 `float: left`，所以我们在第二个盒子上添加的也是 `clear: left`。

### 方法 2：`overflow: hidden`

`overflow` 这个属性需要添加在父元素上，所以我们给两个盒子添加一个父元素，为了看清楚高度塌陷，我们在父元素下方添加一个盒子，如下:

```html
<style>
    *{
        margin: 0;
        padding: 0;
    }
    .box1{
        width: 100px;
        height: 100px;
        background-color: pink;
    }
    .box2{
        width: 80px;
        height: 80px;
        background-color: skyblue;
    }
    .father{
        width: 100%;
        border: 2px solid red;
    }
    .bottom{
        width: 100%;
        height: 200px;
        background-color: green;
    }
</style>


<div class="father">
    <div class="box1">1</div>
    <div class="box2">2</div>
</div>
<div class="bottom">3</div>
```

效果如下：

[![pFYFbin.png](https://s11.ax1x.com/2024/02/19/pFYFbin.png)](https://imgse.com/i/pFYFbin)

如果我们给 box1 和 box2 都加上浮动 `float: left`，看看会发生什么：

[![pFYFvsU.png](https://s11.ax1x.com/2024/02/19/pFYFvsU.png)](https://imgse.com/i/pFYFvsU)

可以看到我们的底部盒子不在原来的位置了，为什么呢？此时我们并没有给父元素设置高度，父元素的高度完全是 box1 和 box2 撑起来的，现在给 box1 和 box2 添加了浮动，不占据原来的位置了，所以父元素此时的高度为零，不占位置了，底部盒子自然就会上去，这就是【高度塌陷】。

我们可以给父元素加上 `overflow: hidden` 来解决这个问题：

[![pFYkFRx.png](https://s11.ax1x.com/2024/02/19/pFYkFRx.png)](https://imgse.com/i/pFYkFRx)

可以看到，此时 box1 和 box2 仍然浮动，但父元素不存在高度塌陷的问题了。需要注意的是，这里 `overflow: hidden` 之所以能够清除浮动，是因为其将父元素变成了一个 [BFC](../../布局技术/BFC、IFC详解.md)！

但是，**并不推荐使用这种方法来清除浮动**！

示例见：[overflow 清除浮动](./tests/overflow.html)

## 方法 3：为父元素添加高度

在方法2的例子中，我们还可以通过为父元素添加固定高度的方法来消除浮动的影响，但注意这里并不是真正清除了浮动。

另外，父元素高度的设置一定要大于子元素中高度最高的盒子。

## 方法 4：额外标签法

额外标签法，即在需要清除浮动的标签后面添加一个空标签，并给其加上 `clear: both`。

如下：

```html
<style>
    ...
    .clear {
        clear: both;
    }
</style>

<div class="father">
    <div class="box1">1</div>
    <div class="box2">2</div>
    <div class="clear"></div>
</div>
<div class="bottom">3</div>
```

效果如下：

[![pFYkFRx.png](https://s11.ax1x.com/2024/02/19/pFYkFRx.png)](https://imgse.com/i/pFYkFRx)

但是这种方法也**不推荐**！

示例见：[额外标签法清除浮动](./tests/extraTag.html)

## 方法 5：使用 `after` 伪元素清除浮动 --- 常用

为父元素添加如下样式：

```css
.father:after {
    content: "";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
```

效果如下：

[![pFYkFRx.png](https://s11.ax1x.com/2024/02/19/pFYkFRx.png)](https://imgse.com/i/pFYkFRx)

当然，这种方法也存在一个缺点：不支持 IE6、IE7。如果要兼容 IE6，可以使用：

```css
.father {
    ...
    zoom: 1;
    ...
}
```

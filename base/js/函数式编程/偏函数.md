# 偏函数 --- 特殊的柯里化函数

## 1. 什么是偏函数 ？

JavaScript中的**偏函数**（Partial Function）是指一个函数，它是由另一个函数通过固定一些参数而得到的，从而产生了一个新的函数。这个新函数的功能和原函数一样，只是在调用时需要传入的参数比原函数更少。

## 2. 偏函数的作用与优点

偏函数的作用是创建一个新的函数，该函数**固定了原函数的部分参数**，使得在调用新函数时只需要提供剩余的参数即可。偏函数的优点在于：

* **可以减少重复代码**。在某些场景下，多个函数的参数有一些相同的部分，使用偏函数可以将这些共同的部分提取出来，避免在多个函数中重复写相同的代码。
* **可以使代码更加模块化**。偏函数可以将一个大函数拆分成多个小函数，每个小函数只负责一部分参数的处理，使得代码更加清晰、易于维护。
* **可以方便地实现柯里化**。偏函数是柯里化的一种特殊形式，它可以为柯里化提供一个简单、快速的实现方式。

正由于偏函数是柯里化的一种特殊形式，所以其也具有和函数柯里化一样的缺点。

## 3. 偏函数示例

假设我们有一个函数 `roundToTwoDecimals`，用于将数字四舍五入到两个小数位。现在我们想要使用这个函数来将一个数组中的所有元素都四舍五入到两个小数位，并将结果保存在一个新的数组中。

我们可以使用 `Array.prototype.map` 方法来实现这个功能，如下所示：

```js
function roundToTwoDecimals(number) {
    return Math.round(number * 100) / 100
}

const numbers = [1.1234, 2.789, 3.859]
const rounded = numbers.map(roundToTwoDecimals)
console.log(rounded)
```

输出为：`[1.12, 2.79, 3.86]`，说明没有问题。

但是如果我们要四舍五入到三个小数位呢？或者是四个、五个等等，难道我们每次都要重新写一遍这个方法吗？这里我们就可以使用偏函数来解决这个问题，方法是：调整函数，让用户自己设定精确度，并返回一个函数，从而达到复用的目的。

```js
// 改为偏函数
function roundToPartial (precision) {
    precision = 10 ** precision
    return function (number) {
        return Math.round(number * precision) / precision
    }
}

// 获取精确度为两位小数的方法
const roundToTwoDecimals = roundToPartial(2)
const numbers = [1.1234, 2.789, 3.859]
const rounded = numbers.map(roundToTwoDecimals)
console.log(rounded)
```

# HTML script 标签 `defer` `async` 属性详解

## 1

<https://blog.csdn.net/weixin_45092437/article/details/129752333>

## 💡2. `defer` 和 `async` 属性的区别？

### 加载顺序不同

* `defer`：js 脚本会按照 HTML 文档中的顺序加载，不会阻塞 HTML 文档解析
* `async`：js 脚本的加载和页面其他内容的加载是**异步**进行的，不会阻塞 HTML 文档解析

### 脚本执行时机不同

* `defer`：脚本**在文档解析完成后才执行**，在 `DOMContentLoaded` 事件之前
* `async`：脚本**加载完毕后立即执行**，不论文档是否已经解析完毕，脚本执行时会阻塞文档解析

### 脚本之间依赖关系不同

* `defer`：多个带有 `defer` 属性的脚本会按照它们在文档中的顺序依次执行，后面的脚本可以依赖前面的脚本。
* `async`：多个带有 `async` 属性的脚本之间**没有依赖关系**，它们的加载和执行顺序不确定。

### ❗总结

不使用 `defer` 和 `async` 时，`script` 标签会阻塞 DOM 解析。

添加 `defer` 属性后，脚本会按照文档中的顺序异步加载，但会在文档解析完毕后才执行。

而添加 `async` 属性后，同样异步加载脚本，但无法保证脚本的加载顺序，且会在脚本加载完毕后立即执行，可能会阻塞文档解析，因此，对于脚本有先后依赖关系的情况下不适用。

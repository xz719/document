# CSS 像素、物理像素、逻辑像素与像素密度

## 1、PX（CSS pixels）--- CSS 像素

### 1.1 定义

虚拟像素，可以理解为“直觉”像素，CSS 和 JS 使用的抽象单位，浏览器内的一切长度都是以 CSS 像素为单位的，CSS 像素的单位是 `px`。

❗注意：在 CSS 规范中，长度单位可以分为两类，绝对（absolute）单位以及相对（relative）单位。**`px` 是一个相对单位，相对的是设备像素（device pixel）**！

* 在同样一个设备上，每 1 个 CSS 像素所代表的物理像素是可以变化的（即 CSS 像素的第一方面的相对性）

* 在不同的设备之间，每 1 个 CSS 像素所代表的物理像素是可以变化的（即 CSS 像素的第二方面的相对性）

### 1.2 理解 CSS 像素的相对性

前面说过，`px` 是一个相对单位，那么如何理解这个相对性？

这里借用 quirksmode 中的一个例子：

假设我们用 PC 浏览器打开一个页面，浏览器此时的宽度为 800px，页面上同时有一个 400px 宽的块级元素容器。很明显此时块状容器应该占页面的一半。

但如果我们把页面放大为 200%，也就是原来的两倍。此时块状容器则横向占满了整个浏览器。

但是此时我们既没有调整浏览器窗口大小，也没有改变块状元素的 CSS 宽度，但是它看上去却变大了一倍 --- **这是因为我们把 CSS 像素放大为了原来的两倍**！

如下图，当 CSS 像素与屏幕像素 1 : 1 同样大小时：

[![pALiV76.png](https://s21.ax1x.com/2024/12/17/pALiV76.png)](https://imgse.com/i/pALiV76)

当我们放大页面时，CSS 像素（黑色边框）开始被拉伸，此时 1 个 CSS 像素大于 1 个屏幕像素：

[![pALieAK.png](https://s21.ax1x.com/2024/12/17/pALieAK.png)](https://imgse.com/i/pALieAK)

也就是说**默认情况下一个 CSS 像素应该是等于一个物理像素的宽度的**，但是浏览器的放大操作让一个CSS像素等于了两个设备像素宽度。在实际开发中，我们会遇到更复杂的情况，在高 PPI 的设备上，CSS 像素甚至在默认状态下就相当于多个物理像素的尺寸。

从上面的例子可以看出，**CSS 像素从来都只是一个相对值**！

## 2. DP（device pixels）--- 物理像素

设备像素（物理像素），顾名思义，显示屏是由一个个物理像素点组成的，通过控制每个像素点的颜色，使屏幕显示出不同的图像，屏幕从工厂出来那天起，它上面的物理像素点就固定不变了，单位 `pt`。

`pt` 在 CSS 单位中属于真正的**绝对单位**，`1pt = 1/72(inch)`，而 1 英寸等于 2.54 厘米。

我们将设备像素与 CSS 像素之间的比例称为【**设备像素比（dpr）**】，当这个比率为 1:1 时，使用 1 个设备像素显示 1 个 CSS 像素。当这个比率为 2:1 时，使用 4 个设备像素显示 1 个 CSS 像素，当这个比率为 3:1 时，使用 9（3*3）个设备像素显示 1 个 CSS 像素，即：

```cmd
DPR = 设备像素 / CSS 像素
```

## 3. DIP（Device independent Pixel）--- 逻辑像素

Device independent Pixel，设备独立像素，也称为逻辑像素。

为什么要有逻辑像素呢？因为物理像素仅代表像素点的个数，并没有有规定一个点实际的尺寸是多少。假设有一个按钮，宽度用 100 个物理像素表示，因屏幕物理像素排列方式和密度的差异，不同屏幕上实际的视觉宽度必然不一样。而逻辑像素相同就表示希望按钮在不同屏幕上看起来一样大。

## 4. DPR（device pixels ratio）--- 设备像素比

设备像素比（dpr）是指在移动开发中 1 个 CSS 像素占用多少设备像素，如 dpr = 2 代表 1 个 CSS 像素用 2 x 2 个设备像素来绘制。

在浏览器中，我们可以通过 `window.devicePixelRatio` 来获取到具体的值。

❗需要注意的是，我们实际开发中常说的 2 倍屏、3 倍屏，实际上就是指的这个值！

## 5. PPI（pixels per inch）--- 像素密度

像素密度，准确的说是每英寸的像素点数量，也就是衡量单位物理面积内拥有像素值的情况。像素密度越高，代表屏幕显示效果越精细。

计算公式如下：

[![pALiQcd.png](https://s21.ax1x.com/2024/12/17/pALiQcd.png)](https://imgse.com/i/pALiQcd)

## ⏸️小结

要点：

1. `px` 是一个相对单位；
2. `pt` 是一个绝对单位，代表物理像素点；
3. 我们常说的 2 倍屏（@2x）、3 倍屏（@3x），实际上说的是 dpr，即设备像素比；
4. PPI 才是真正的像素密度，其代表每英寸的像素的数量。

## ❓补充：为什么在移动端开发时需要⽤到 @3x, @2x 这种图片？

以 iPhone XS 为例，当赋予⼀个 DIV 元素宽度为 414px，这个 DIV 就会填满⼿机的宽度；

⽽如果有⼀把尺⼦来实际测量这部⼿机的物理像素，实际为 1242*2688 物理像素；经过计算可知，1242/414=3，也就是说，在单边上，1 个逻辑像素 = 3 个物理像素，也就是常说的 3 倍屏。

但**对于图⽚来说，为了保证其不失真，1 个图⽚像素⾄少要对应 1 个物理像素**，假如原始图⽚是 500300 像素，那么在 3 倍屏上就要放⼀个 1500900 像素的图⽚才能保证 1 个物理像素⾄少对应 1 个图⽚像素。

所以，在实际开发中，我们常常会使用媒体查询，针对不同 dpr 的屏幕使用包含不同像素的图片，即 @3x, @2x 这种图片，❗最终的目的是不让图片失真。

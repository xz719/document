# 第二章：框架设计的核心要素

本章主要讲解框架设计时的一些凌乱的注意点。

## 2.1 提升用户的开发体验

* 心智负担低
* 便于调试

## 2.2 控制框架代码的体积

通过控制 `__DEV__` 变量，做到在开发环境中为用户提供友好的警告信息的同时，不会增加生产环境的代码体积。

## 2.3 框架要做到良好的 Tree-shaking

什么是 Tree-shaking ？

在前端领域，这个概念因 rollup.js 而普及。简单地说，Tree-Shaking 指的就是消除那些永远不会被执行的代码，即 dead code，现在，无论是 rollup.js 还是 webpack均支持 Tree-Shaking。

## 2.4 输出不同的构建产物

适配不同场景下的需求，框架需要能够输出不同格式的构建产物。

## 2.5 错误提示与处理

提供了统一的错误处理接口：callWithErrorHanding。

甚至我们可以注册自己的错误处理程序。

## 2.6 良好的可维护性

* 框架本身用 TS 编写，具有良好的可维护性
* 对 TS 的友好支持，内部使用了大量的类型判断与处理

## 2.7 特性开关

提供特性开关：

* 对于关闭的特性，可以通过 Tree-Shaking 将其排除在最终的资源外
* 为框架设计提供了灵活性，我们可以灵活地为框架添加新特性，而不必担心最终的资源体积过大。
